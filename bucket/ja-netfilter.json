{
    "version": "1.2.0",
    "description": "A javaagent framework",
    "homepage": "https://zhile.io/2021/11/29/ja-netfilter-javaagent-lib.html",
    "license": "GPL-3.0-only",
    "url": [
        "https://github.com/ja-netfilter/ja-netfilter/releases/download/v1.2.0/ja-netfilter-v1.2.0.zip",
        "https://pan.jiemi.workers.dev/?file=/Public/scoop/patch/plugins/mymap.jar"
    ],
    "hash": [
        "38bc132705c54cf333ffae05b540cdeefee9a067af4c1438574ba3ee6a5554aa",
        "2a20c5f9a05820f522d9338c57aeac51232422af87ac299c3bb541e948549774"
    ],
    "extract_dir": "ja-netfilter",
    "pre_install": [
        "if (!(Test-Path \"$persist_dir\\janf_config.txt\")) { New-Item -Path \"$dir\" -Name \"janf_config.txt\" -ItemType File | Out-Null }",
        "$cont = @(",
        "    '[DNS]'",
        "    'EQUAL,jetbrains.com'",
        "    ''",
        "    '[URL]'",
        "    '# SmartGit'",
        "    'PREFIX,https://store.smartgit.com/check'",
        "    '# DBEaverEE'",
        "    'PREFIX,https://dbeaver.com/lmp/checkLicense'",
        "    '# JetBrains'",
        "    'PREFIX,https://account.jetbrains.com/lservice/rpc/validateKey.action'",
        "    ''",
        "    '[MyMap]'",
        "    \"EQUAL,licenseeName->$env:USERNAME\"",
        "    'EQUAL,gracePeriodDays->100000'",
        "    'EQUAL,paidUpTo->2022-12-31'",
        ")",
        "Set-Content \"$dir\\janf_config.txt\" -Value $cont -Encoding Ascii",
        "New-Item -Path \"$dir\" -Name \"plugins\" -ItemType Directory -Force",
        "foreach ($name in @('mymap.jar')) {",
        "    Move-Item -Path \"$dir\\$name\" -Destination \"$dir\\plugins\" -Force",
        "}"
    ],
    "post_install": [
        "$text = \"Add Content '-javaagent:$dir\\ja-netfilter.jar' \"",
        "if (Test-Path \"$scoopdir\\apps\\smartgit\") { $text = \"$text `r`n SmartGit: $(scoop prefix smartgit)\\bin\\smartgit.vmoptions\" }",
        "if (Test-Path \"$scoopdir\\apps\\dbeaver-ee\") { $text = \"$text `r`n DBEaverEE:  $(scoop prefix dbeaver-ee)\\Eclipse\\dbeaver.ini\" }",
        "$text = \"$text `r`n JetBrains:  IDE Menu -> Help -> Edit Custom VM Options\"",
        "warn $text"
    ],
    "persist": "janf_config.txt",
    "checkver": {
        "github": "https://github.com/ja-netfilter/ja-netfilter/"
    },
    "autoupdate": {
        "url": "https://github.com/ja-netfilter/ja-netfilter/releases/download/v$version/ja-netfilter-v$version.zip"
    }
}
